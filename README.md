# Node.js 게임서버 숙련 주차 개인 과제

1. **웹 프레임워크**: Node.js에서 가장 대표적인 웹 프레임워크인 **Express.js**를 사용합니다.
2. **패키지 매니저**: 빠른 설치 속도와 우수한 패키지 관리를 지원하는 **yarn** 패키지 매니저를 사용합니다.
3. **모듈 시스템**: 최신 JS 문법을 지원하는 **ES6** 모듈 시스템을 사용합니다.
4. **데이터베이스**
   숙련 주차 강의 후반에서 다룬 **MySQL**을 사용합니다.
   직접 설치하지 않고, Cloud 서비스인 **AWS RDS**를 이용합니다.
5. **ORM(Object Relational Mapping)
   MySQL**의 데이터를 쉽게 읽고 쓰게 해주는 [**Prisma**](https://www.prisma.io/)를 사용합니다.

## 📘 프로젝트 개요

1. 아이템 시뮬레이터 서비스 ERD  
   ![아이템 시뮬레이터 서비스 ERD](https://drive.google.com/file/d/1ZSluU1bah3BaxbpPAdNFwqKfnjvSVTem/view?usp=sharing)
2. [API 명세서](https://chiseled-approval-5a0.notion.site/2.Node-js-a28348f1f000442c8a5920873c4d6df7?pvs=4)

## 🖊️ 프로젝트 회고

### 1️⃣ 암호화 방식

비밀번호를 DB에 저장할 때 사용한 Hash는 **단반향 암호화**로 데이터를 고정된 크기의 해시값으로 변환하고 변환된 값은 복호화가 불가능합니다. 따라서 비밀번호와 같은 기밀정보를 해시한 값으로 저장하면 보안성이 향상되고 항상 동일한 결과가 출력되기 때문에 데이터 무결성 유지에도 용이합니다.

### 2️⃣ 인증 방식

JWT(Json Web Token)를 이용한 인증 시스템에서 Access Token이 노출될 경우 해당 토큰을 가진 사람은 토큰에 지정된 권한을 가진 사용자로서 시스템에 접근할 수 있게 됩니다. 이는 데이터 유출, 서비스 남용 등 심각한 보안 위험을 초래할 수 있습니다.

이를 보완하기 위한 방법으로는 Access Token의 유효 기간을 짧게 설정하고, 필요 시 Refresh Token을 이용해 재발급 받도록 하는 것이 있습니다. 이 방법은 토큰 노출 위험을 최소화하면서 사용자가 계속해서 서비스를 이용할 수 있게 합니다.

### 3️⃣ 인증과 인가

**인증** : 사용자가 시스템에 접근하려 할 때 그들의 신원을 확인하는 과정입니다. 이는 사용자가 누구인지 확인하기 위해 사용자 이름, 비밀번호, 생체 정보, 전자 인증서 등의 정보를 사용할 수 있습니다. 인증 과정은 사용자가 주장하는 신원이 실제로 그 사용자의 것이 맞는지를 확인하는 첫 단계입니다.

**인가** : 인증된 사용자가 시스템 내에서 수행할 수 있는 작업의 범위를 결정하는 과정입니다. 즉, 사용자가 어떤 자원에 접근하거나 어떤 작업을 수행할 수 있는지를 결정합니다. 인가 과정은 사용자에게 특정 자원에 대한 접근 권한을 부여하거나 거부합니다.

#### ❓ 위 API 구현 명세에서 인증을 필요로 하는 API와 그렇지 않은 API의 차이가 뭐라고 생각하시나요?

주로 사용자 권한의 유무와 관련이 있다고 생각합니다. 게임 진행 상태나 개인 설정과 같이 사용자에게 직접적인 영향을 미치는 작업은 사용자의 신원을 정확하게 확인하고, 해당 사용자가 그 요청을 할 권한이 있는지를 철저히 검증해야 합니다.

#### ❓ 아이템 생성, 수정 API는 인증을 필요로 하지 않는다고 했지만 사실은 어느 API보다도 인증이 필요한 API입니다. 왜 그럴까요?

아이템 생성, 수정 API는 게임 사용자가 아닌 게임 관리자가 다루어야할 영역입니다.

### 4️⃣ Http Status Code

- **200 OK** - 요청이 성공적으로 처리되었습니다.  
  GET req 성공 응답에 사용
- **201 Created** - 요청이 성공적으로 수행되어 새로운 리소스가 생성되었습니다.  
  POST req 성공 응답에 사용
- **400 Bad Reques**t - 서버가 요청을 이해할 수 없어 처리할 수 없습니다.
  body 입력 값 유효성 검증에 사용
- **401 Unauthorized** - 요청이 인증을 필요로 하며, 클라이언트가 인증되지 않았습니다.
  body 입력 값이 db에 존재하지 않을 경우 사용
- **403 Forbidden** - 서버가 요청을 이해했으나 권한 부족으로 거부하고 있습니다.  
  데이터가 존재하나 사용자에게 권한이 없을 때 사용
- **404 Not Found** - 요청받은 리소스를 찾을 수 없습니다.  
  body 입력 값이 db에 존재하지 않을 경우 사용
- **409 Conflict** - 요청이 서버의 현재 상태와 충돌하여 처리할 수 없습니다.  
  db에 데이터를 입력할 때 이미 같은 데이터가 존재하는 경우 사용
- **500 Internal Server Error** - 서버에 오류가 발생해 요청을 수행할 수 없습니다.  
  직접 지정하는 오류 이외에 서버단에서 오류가 발생할 때 사용

### 5️⃣ 게임 경제

- ❓ 현재는 간편한 구현을 위해 캐릭터 테이블에 money라는 게임 머니 컬럼만 추가하였습니다.

  - 이렇게 되었을 때 어떠한 단점이 있을 수 있을까요?  
    -> money의 흐름과 내역을 알 수 없습니다.
  - 이렇게 하지 않고 다르게 구현할 수 있는 방법은 어떤 것이 있을까요?  
    -> money 히스토리 테이블을 생성하고 로그 미들웨어를 추가해 내역을 로깅합니다.

- ❓ 아이템 구입 시에 가격을 클라이언트에서 입력하게 하면 어떠한 문제점이 있을 수 있을까요?  
  -> 클라이언트는 아이템을 마구잡이로 매입하고 아이템 가치가 없어지게 될 것입니다.
